apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../base/demo-app
images:
- digest: sha256:7c6d524fc59220c0ef377a5511e33f912dffb8a77a4afde14a0af2b508d832ac
  name: 488639172435.dkr.ecr.eu-central-1.amazonaws.com/demo-app
replacements:
- source:
    fieldPath: spec.template.spec.containers.0.image
    kind: Deployment
    name: demo-app-deployment
  targets:
  - fieldPaths:
    - data.IMAGE_NAME
    select:
      kind: ConfigMap
      name: demo-app-config
labels:
- includeTemplates: true
  pairs:
    app.kubernetes.io/instance: production
